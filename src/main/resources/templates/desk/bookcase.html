<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:form="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>åœ¨çº¿ä¹¦æ¶</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <link rel="icon" href="/resources/favicon.ico">
    <link rel="stylesheet" href="/resources/layui/css/layui.css" media="all"/>
    <link rel="stylesheet" href="/resources/css/public.css" media="all"/>
    <link rel="stylesheet" href="/resources/css/cate.css" media="all"/>
</head>
<body class="childrenBody">

<!--æŸ¥è¯¢æ¡ä»¶å¼€å§‹-->
<fieldset class="layui-elem-field layui-field-title" style="margin-top: 0;">
    <legend>æŸ¥è¯¢æ¡ä»¶</legend>
</fieldset>

<blockquote class="layui-elem-quote">
    <!--æ¡ä»¶æŸ¥è¯¢è¡¨å•-->
    <form class="layui-form layui-form-pane" action="" method="post" id="searchForm" lay-filter="searchForm">
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label" for="booknum">å›¾ä¹¦åºåˆ—å·</label>
                <div class="layui-input-inline">
                    <input type="text" name="booknum" id="booknum" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label" for="name">å›¾ä¹¦åç§°</label>
                <div class="layui-input-inline">
                    <input type="text" name="name" id="name" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label" for="author">å›¾ä¹¦ä½œè€…</label>
                <div class="layui-input-inline">
                    <input type="text" name="author" id="author" autocomplete="off" class="layui-input">
                </div>
            </div>
<!--            <div class="layui-inline">-->
<!--                <label class="layui-form-label" for="putawayStatus">ä¸Šæ¶çŠ¶æ€</label>-->
<!--                <div class="layui-input-inline">-->
<!--                    <select name="putaway" id="putawayStatus" lay-search>-->
<!--                        <option value="" selected>æœªé€‰æ‹©</option>-->
<!--                        <option value="0" >æœªä¸Šæ¶</option>-->
<!--                        <option value="1" >å·²ä¸Šæ¶</option>-->
<!--                    </select>-->
<!--                </div>-->
<!--            </div>-->
            <div class="layui-inline">
                <label class="layui-form-label" for="category">å›¾ä¹¦åˆ†ç±»</label>
                <div class="layui-input-inline">
                    <select name="fkCategoryid" id="category" lay-search>
                    </select>
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label" for="publisher">å‡ºç‰ˆç¤¾</label>
                <div class="layui-input-inline">
                    <select name="fkPublisherid" id="publisher" lay-search>
                    </select>
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label" for="startTime">å‡ºç‰ˆå¼€å§‹æ—¥</label>
                <div class="layui-input-inline">
                    <input type="text" name="startTime" id="startTime" placeholder="yyyy-MM-dd HH:mm:ss" readonly="readonly" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label" for="endTime">å‡ºç‰ˆç»“æŸæ—¥</label>
                <div class="layui-input-inline">
                    <input type="text" name="endTime" id="endTime" placeholder="yyyy-MM-dd HH:mm:ss" readonly="readonly" autocomplete="off" class="layui-input">
                </div>
            </div>
        </div>
        <!--æŸ¥è¯¢è¡¨å•æŒ‰é’®-->
        <div class="layui-row layui-col-space1">
            <div class="layui-col-md4">
                <!--å ä½-->
                <div class="grid-demo grid-demo-bg1"></div>
            </div>
            <div class="layui-col-md4">
                <div class="grid-demo grid-demo-bg1">
                    <div class="layui-form-item" style="">
                        <div class="layui-input-block">
                            <button type="button" class="layui-btn layui-btn-normal" lay-submit="" lay-filter="doSearch">
                                <i class="layui-icon layui-icon-search"></i>
                                æœç´¢
                            </button>
                            <button type="reset" class="layui-btn layui-btn-primary">
                                <i class="layui-icon layui-icon-refresh-1"></i>
                                é‡ç½®
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="layui-col-md4">
                <!--å ä½-->
                <div class="grid-demo grid-demo-bg1"></div>
            </div>
        </div>
    </form>
</blockquote>
<!--æŸ¥è¯¢æ¡ä»¶ç»“æŸ-->

<!--åœ¨çº¿ä¹¦æ¶ å¼€å§‹-->
<fieldset class="layui-elem-field layui-field-title" style="margin-top: 0;">
    <legend>åœ¨çº¿ä¹¦æ¶</legend>
</fieldset>

<div class="mainmenu">
    <img src="/resources/images/5_top.jpg" height="8" class="bottom" alt=""/>
    <div id="bookRack"></div>
</div>
<!--åœ¨çº¿ä¹¦æ¶ ç»“æŸ-->

<!-- æ·»åŠ å’Œä¿®æ”¹çš„å¼¹å‡ºå±‚å¼€å§‹ -->
<div style="display: none; padding: 5px" id="addOrUpdateLayer">
    <form action="" method="post" class="layui-form layui-form-pane" id="addOrUpdateForm" lay-filter="dataFrm">

        <div class="layui-form-item">
            <label class="layui-form-label" for="expectTime">è¿˜ä¹¦æ—¶é—´</label>
            <div class="layui-input-block">
                <input type="hidden" name="booknum" id="booknum2">
                <input type="text" name="expectTime" id="expectTime" readonly lay-verify="required" placeholder="yyyy-MM-dd" autocomplete="off" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label" for="content">å€Ÿé˜…å…¬å‘Š</label>
            <div class="layui-input-block">
                <form:textarea class="layui-textarea" id="content" htmlEscape="true" readonly>
                    äº²çˆ±çš„åŒå­¦ï¼š<br>
                        &emsp;&emsp;å¤§å®¶å¥½ï¼<br>
                        &emsp;&emsp;å¾ˆé«˜å…´åŒå­¦èƒ½å¤Ÿç§¯æå‚ä¸åˆ°è¯¾å¤–é˜…è¯»ä¸­æå‡è‡ªå·±çš„è§†é‡ï¼Œæˆ‘ä»¬ä¹Ÿç§¯æé…åˆåŒå­¦ä»¬çš„é˜…è¯»å€Ÿé˜…å·¥ä½œã€‚
                        ä½†æ˜¯è¿˜è¯·æ³¨æ„ï¼Œç”±äºæœ¬å›¾ä¹¦é¦†çš„å›¾ä¹¦å±äº<span style="color: #01AAED">å…¬å…±èµ„æº</span>ï¼Œè¿˜è¯·å„ä½åŒå­¦å€Ÿé˜…ä¹‹åå¥½å¥½ä¿ç®¡ï¼Œä»¥ä¾¿å…¶ä»–çš„åŒå­¦ä»¬è¿›è¡Œå€Ÿé˜…ã€‚
                    å¦å¤–ï¼Œè¿˜è¯·æ³¨æ„è‡ªå·±å¡«å†™çš„å€Ÿé˜…å½’è¿˜æ—¶é—´ï¼Œé€¾æ—¶æœªå½’è¿˜æ˜¯ä¼šæ‰£é™¤ä¸€å®šçš„<span style="color: #ff6700">æŠ¼é‡‘</span>ï¼Œå¹¶å½±å“ä¿¡èª‰çš„å“¦ï¼<br>
                        &emsp;&emsp;ç¥å¤§å®¶åšå­¦ä¹‹ï¼Œå®¡é—®ä¹‹ï¼Œæ…æ€ä¹‹ï¼Œæ˜è¾¨ä¹‹ï¼Œç¬ƒè¡Œä¹‹ã€‚<br>
                        <hr class="layui-bg-blue">
                    <b>è§„å®šï¼š</b><br>
                    &emsp;&emsp;1ã€å€Ÿé˜…å½’è¿˜æ—¶é—´èŒƒå›´ä¸º<span style="color: #01AAED">å€Ÿé˜…ä¹¦ç±çš„ç¬¬äºŒå¤©å¼€å§‹è‡³ä¸‹ä¸ªæœˆçš„ä»Šå¤©æˆªæ­¢</span>ã€‚<br>
                    &emsp;&emsp;2ã€é€¾æ—¶ä¸€å¤©æœªå½’è¿˜å°†æ‰£é™¤æ‚¨çš„æŠ¼é‡‘ï¼Œ<span style="color: #ff6700">æ¯å¤©æ‰£é™¤0.2å…ƒï¼Œä¾æ¬¡ç´¯åŠ </span>ï¼Œç›´è‡³å½’è¿˜ã€‚<br>
                </form:textarea>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-input-blocklayer-footer" style="text-align: center; float: bottom; ">
                <button type="button" class="layui-btn" lay-submit="" lay-filter="addBorrow" id="doSubmit">
                    <span class="layui-icon layui-icon-ok"></span> ç¡®å®š
                </button>
                <button type="reset" class="layui-btn layui-btn-warm" id="doReset">
                    <span class="layui-icon layui-icon-refresh-1"></span> é‡ç½®
                </button>
            </div>
        </div>
    </form>
</div>
<!-- æ·»åŠ å’Œä¿®æ”¹çš„å¼¹å‡ºå±‚ç»“æŸ -->

<script type="text/javascript" src="/resources/layui/layui.js"></script>
<script type="text/javascript">
    layui.use(['form', 'layer', 'jquery', 'upload', 'laydate', 'flow'], function () {
        var form = layui.form;
        var layer = layui.layer;
        var $ = layui.jquery;
        var upload = layui.upload;
        var laydate = layui.laydate;
        var flow = layui.flow;

        // å®šä¹‰å›¾ä¹¦å€Ÿé˜…çš„å¼¹å‡ºå±‚
        var addOrUpdateLayerIndex;

        // å®šä¹‰è¿˜ä¹¦æˆªæ­¢æ—¥
        var dateTime = new Date();

        // å°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºjsonå¯¹è±¡
        $.extend({
            /* è§£æä¸ºJSON */
            "parseJSON": function (str) {
                var strArr = str.split("&");
                var searchJSON = {};
                $.each(strArr, function (index, item) {
                    var newItem = item.split("=");
                    searchJSON[newItem[0]] = decodeURIComponent(newItem[1]);
                });
                return searchJSON;
            }
        });

        // åˆå§‹åŒ–å¼€å§‹æ—¶é—´é€‰æ‹©å™¨
        var startTime = laydate.render({
            elem: '#startTime',
            type: 'datetime',
            theme: '#4d99cf',
            istoday: true,
            done: function (value, date) {
                date.month = date.month !== 1 ? date.month - 1 : (date.year--, 12);// æœˆä»½ä¿®æ­£,é€—å·è¡¨è¾¾å¼ï¼Œä¸¤è¾¹éƒ½æ‰§è¡Œï¼Œè¿”å›ç¬¬äºŒä¸ªè¡¨è¾¾å¼
                endTime.config.min = date;      // å¼€å§‹æ—¥é€‰å¥½åï¼Œé‡ç½®ç»“æŸæ—¥çš„æœ€å°æ—¥æœŸ
                endTime.config.value = value;   // å°†ç»“æŸæ—¥çš„åˆå§‹å€¼è®¾å®šä¸ºå¼€å§‹æ—¥
                $("#endTime").val(value);       // ç»™ç»“æŸæ—¶é—´èµ‹å€¼
            }
        });

        // åˆå§‹åŒ–ç»“æŸæ—¶é—´é€‰æ‹©å™¨
        var endTime = laydate.render({
            elem: '#endTime',
            type: 'datetime',
            max: '2099-06-16 23:59:59',
            istoday: true,
            theme: '#4d99cf',
            done: function (value, date) {
                console.log(endTime);
                // å¦‚æœç»“æŸæ—¶é—´å°äºå¼€å§‹æ—¶é—´ï¼Œå°±è®©å¼€å§‹æ—¶é—´=ç»“æŸæ—¶é—´
                var start = $("#startTime"), end = $("#endTime");
                if (start.val() > end.val()) {
                    start.val(end.val());
                }
            }
        });

        // åˆå§‹åŒ–é¢„æœŸè¿˜ä¹¦æ—¶é—´é€‰æ‹©å™¨
        laydate.render({
            elem: '#expectTime',
            type: 'date',
            range: true,
            istoday: true,
            min: dateTime.setDate(dateTime.getDate() + 1),
            max: dateTime.setMonth(dateTime.getMonth() + 1),
            theme: '#4d99cf'
        });

        // è·å–ä¹¦ç±åˆ†ç±»çš„å€¼
        $.ajax({
            url: '/category/getPageCategory?pageNum=1&pageSize=100',
            dataType: 'json',   //æœåŠ¡å™¨è¿”å›jsonæ ¼å¼æ•°æ®
            type: 'get',        //HTTPè¯·æ±‚ç±»å‹
            timeout: 5000,      //è¶…æ—¶æ—¶é—´è®¾ç½®ä¸º5ç§’ï¼›
            success: function (data) {
                // console.log(data.list);
                //ç»™ä¸€ä¸ªé»˜è®¤å€¼ï¼ˆâ€˜è¯·é€‰æ‹©â€™ï¼‰
                var opt = '<option value="" selected="">è¯·é€‰æ‹©</option>';
                //è·å–è¿”å›çš„æ•°æ®
                var value = data.list;
                //å¾ªç¯éå†
                for (var i in value) {
                    if (value.hasOwnProperty(i)) {
                        opt += '<option value = "' + value[i].id + '">' + value[i].name + '</option>'
                    }
                }
                $("#category").html(opt);
                form.render('select');//éœ€è¦æ¸²æŸ“ä¸€ä¸‹
            }
        });

        // è·å–å‡ºç‰ˆç¤¾çš„å€¼
        $.ajax({
            url: '/publisher/getPagePublisher?pageNum=1&pageSize=100',
            dataType: 'json',   //æœåŠ¡å™¨è¿”å›jsonæ ¼å¼æ•°æ®
            type: 'get',        //HTTPè¯·æ±‚ç±»å‹
            timeout: 5000,      //è¶…æ—¶æ—¶é—´è®¾ç½®ä¸º5ç§’ï¼›
            success: function (data) {
                //ç»™ä¸€ä¸ªé»˜è®¤å€¼ï¼ˆâ€˜è¯·é€‰æ‹©â€™ï¼‰
                var opt = '<option value="" selected="">è¯·é€‰æ‹©</option>';
                //è·å–è¿”å›çš„æ•°æ®
                var value = data.list;
                //å¾ªç¯éå†
                for (var i in value) {
                    if (value.hasOwnProperty(i)) {
                        opt += '<option value = "' + value[i].id + '">' + value[i].name + '</option>'
                    }
                }
                $("#publisher").html(opt);
                form.render('select');//éœ€è¦æ¸²æŸ“ä¸€ä¸‹
            }
        });

        // åˆå§‹åŒ–æµåŠ è½½
        flowload();

        //æ¨¡ç³ŠæŸ¥è¯¢
        form.on("submit(doSearch)",function(data){
            // é‡ç½®æµåŠ è½½å†…å®¹
            $("#bookRack").html("");
            // è°ƒç”¨æµåŠ è½½ï¼Œå¹¶ä¼ å‚
            flowload(data.field);
            return false;
        });

        // æµåŠ è½½
        function flowload(data) {
            flow.load({
                elem: '#bookRack' //æµåŠ è½½å®¹å™¨
                , isAuto: false
                , isLazyimg: true
                , done: function (page, next) { //åŠ è½½ä¸‹ä¸€é¡µ
                    //æ¨¡æ‹Ÿæ’å…¥
                    setTimeout(function () {
                        var lis = [];
                        var info = { pageNum: page, pageSize: 3, putaway: 1 };
                        // æµ…æ‹·è´
                        $.extend(info, data);
                        console.log("info:", info);
                        $.get('/book/getPageBook', info, function (res) {
                            lis.push('<ul id="grid" class="group">');
                            layui.each(res.list, function (index, item) {

                                //æ‰§è¡Œä¸‹ä¸€é¡µæ¸²æŸ“ï¼Œç¬¬äºŒå‚æ•°ä¸ºï¼šæ»¡è¶³â€œåŠ è½½æ›´å¤šâ€çš„æ¡ä»¶ï¼Œå³åé¢ä»æœ‰åˆ†é¡µ
                                //æµåŠ è½½æ’å…¥å†…å®¹éƒ¨åˆ†ï¼Œæ ¹æ®è‡ªå·±éœ€æ±‚æ›´æ”¹ï¼Œè¿™é‡Œåšçš„æ¡ˆä¾‹ï¼Œæ‰€ä»¥å°±å†™çš„æ¯”è¾ƒç®€å•
                                lis.push('<li>' +
                                    '       <a onclick="readBook(\''+ $.param(item) +'\'); return false;" href="#">' +
                                    '           <img src="'+item.src+'" alt="'+item.alt+'" style="box-shadow: 2px 2px 14px 4px rgba(0, 0, 0, 0.35);"/>' +
                                    '           <p style="margin-top:2px; font-weight: bold; color: #FD482C">ã€ '+item.name+' ã€‘</p>' +
                                    '       </a>' +
                                    '     </li>'
                                );
                            });
                            lis.push('</ul><img src="/resources/images/5_gc.jpg" height="19" class="gc" alt=""/>');
                            //totalä¸ºAjaxè¿”å›çš„æ€»é¡µæ•°ï¼Œåªæœ‰å½“å‰é¡µå°äºæ€»é¡µæ•°çš„æƒ…å†µä¸‹ï¼Œæ‰ä¼šç»§ç»­å‡ºç°åŠ è½½æ›´å¤š
                            next(lis.join(''), page < res.pages); //å‡è®¾æ€»é¡µæ•°ä¸º 10
                            // å®šä¹‰ä¹¦æ¶ä¸Šçš„ä¹¦
                            var book_image = $(".mainmenu li a img");
                            //è®¾ç½®å›¾ç‰‡çš„é«˜åº¦
                            book_image.height(Number(book_image.width()) * 1.3);
                        })
                    }, 500);
                }
            });
        }

        //è®¾ç½®å›¾ç‰‡çš„é«˜åº¦
        $(window).resize(function(){
            // å®šä¹‰ä¹¦æ¶ä¸Šçš„ä¹¦
            var book_image = $(".mainmenu li a img");
            book_image.height(Number(book_image.width()) * 1.3);
        })

        // ä¹¦ç±é˜…è¯» äº‹ä»¶
        readBook = function (data) {
            console.log("ä¹¦ç±ä¿¡æ¯ï¼š", data);
            console.log("ä¹¦ç±ä¿¡æ¯ï¼š", $.parseJSON(data));
            var bookinfo = $.parseJSON(data);
            layer.open({
                type: 2,    // iframeå±‚-çˆ¶å­æ“ä½œ
                // title:['ğŸ“œ åœ¨çº¿é˜…è¯»', 'font-size:18px; color:#07c462'],
                area: ['70%', '85%'],
                fixed: false, // ä¸å›ºå®š
                maxmin: true,
                resize: true, // å…è®¸æ‹–æ‹½å¤§å°
                content: '/sys/toOnlineReading', // éœ€è¦è·³è½¬çš„åœ°å€ï¼Œæˆ–è€…æ˜¯é™æ€æ–‡ä»¶
                btn: ['<i class="layui-icon" id="borrowBtn">&#xe609; å€Ÿé˜…æ­¤ä¹¦</i>', '<i class="layui-icon">&#x1006; å…³é—­é¡µé¢</i>'],
                yes: function(index, layero){
                    //æŒ‰é’®ã€æŒ‰é’®ä¸€ã€‘çš„å›è°ƒ

                    // åˆ¤æ–­æ­¤ä¹¦æ˜¯å¦å·²è¢«å€Ÿé˜…,æ¨èä½¿ç”¨åŒæ­¥æ–¹å¼å•Š
                    var flag = true;
                    // $.get('/borrow/getBorrowRecords',{loginname: "[[${session.user.loginname}]]", booknum: bookinfo.booknum}, function (res) {
                    //     if (res.code === 200 ) {
                    //         layer.msg(res.msg);
                    //         flag = false;
                    //     }
                    // });
                    $.ajax({
                        type: "get",
                        url: "/borrow/getBorrowRecords",
                        data: 'loginname='+"[[${session.user.loginname}]]"+'&booknum=' + bookinfo.booknum,
                        datatype: "json",
                        async: false,
                        success: function (response) {
                            if (response.code === 200 ) {
                                layer.msg(response.msg);
                                flag = false;
                                $("#borrowBtn").html("&#xe609; ä¸å¯å€Ÿé˜…").attr("disabled", "disabled").addClass("layui-disabled");
                            } else {
                                //è®¾ç½®å€Ÿé˜…æŒ‰é’® æ¢å¤å¯ç‚¹å‡»   åœ¨å‰ç«¯é˜²æ­¢ é‡å¤ç‚¹å‡»
                                $("#borrowBtn").html("&#xe609; å€Ÿé˜…æ­¤ä¹¦").attr("disabled", false).removeClass("layui-disabled");
                            }
                        }
                    });
                    if (!flag) {
                        return false;
                    }

                    // è®¤è¯ç”¨æˆ·èº«ä»½ï¼Œåˆ¤æ–­æ˜¯ä¸æ˜¯æœ¬äººè¿›è¡Œå€Ÿé˜…
                    layer.confirm('ä½ ç¡®å®šè¦å€Ÿé˜…ã€' + bookinfo.name + 'ã€‘è¿™æœ¬ä¹¦å—?', {icon: 3, title: 'æç¤º'}, function (index) {
                        //promptå±‚
                        layer.prompt({title: 'æˆ‘ä»¬éœ€è¦æ‚¨è¾“å…¥<b>ç™»å½•å¯†ç </b>ï¼Œä»¥ç¡®è®¤æ‚¨çš„èº«ä»½', formType: 1}, function (pass, index) {
                            layer.close(index);
                            $.ajax({
                                type: "get",
                                url: "/user/checkUser",
                                data: 'pwd=' + pass,
                                datatype: "json",
                                async: false,
                                success: function (response) {
                                    if (response.code !== 200) {
                                        layer.msg(response.msg);
                                        return false;
                                    }
                                    // æ‰“å¼€å¼¹å‡ºå±‚ï¼Œç”¨æˆ·è¾“å…¥å€Ÿé˜…ä¿¡æ¯ï¼Œå®Œæˆå€Ÿé˜…
                                    addOrUpdateLayerIndex = layer.open({
                                        type: 1,
                                        anim: 2,
                                        content: $("#addOrUpdateLayer"),
                                        area: ['55%', '80%'],
                                        title: ['ğŸ“ å¡«å†™ä¿¡æ¯', 'font-size:18px; color:#07c462'],
                                        success: function () {
                                            // ç»™å›¾ä¹¦åºåˆ—å·èµ‹å€¼
                                            $("#booknum2").val(bookinfo.booknum);
                                            $("#expectTime").val("");
                                        }
                                    });
                                }
                            });

                        });
                    });
                },
                btn2: function(index, layero){
                    //æŒ‰é’®ã€æŒ‰é’®äºŒã€‘çš„å›è°ƒ
                    //return false å¼€å¯è¯¥ä»£ç å¯ç¦æ­¢ç‚¹å‡»è¯¥æŒ‰é’®å…³é—­
                },
                cancel: function(){
                //å³ä¸Šè§’å…³é—­å›è°ƒ
                //return false å¼€å¯è¯¥ä»£ç å¯ç¦æ­¢ç‚¹å‡»è¯¥æŒ‰é’®å…³é—­
                },
                success: function(layero){
                    //æ­¤idä¸ºé¡µé¢å±‚inputæ ‡ç­¾id
                    var jquerySendHelloButton = $("#book", layero.find("iframe")[0].contentWindow.document);
                    //è¦ä¼ çš„å€¼
                    jquerySendHelloButton.attr("value", data );
                }
            });
        }

        // å€Ÿé˜…å›¾ä¹¦å¼¹å‡ºå±‚æäº¤äº‹ä»¶
        form.on('submit(addBorrow)',function () {

            // åºåˆ—åŒ–è¡¨å•å†…å®¹
            var expectTime = $("#expectTime");
            // æˆªå–å€’æ•°10ä½å­—ç¬¦
            expectTime.val(expectTime.val().substr(-10,10) + " 23:59:59");
            console.log("é¢„æœŸæ—¶é—´ï¼š" + expectTime.val());
            var data = $("#addOrUpdateForm").serialize();
            console.log("æ–°å¢ã€ä¿®æ”¹å¼¹å‡ºå±‚çš„åºåˆ—åŒ–æ•°æ®ï¼š", data);

            $.post("/borrow/addBorrow", data, function (res) {

                if (res.code === 200) {
                    layer.close(addOrUpdateLayerIndex);
                }
                layer.msg(res.msg);
            })
        })
    });
</script>

</body>
</html>
